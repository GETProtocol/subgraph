enum Interaction {
  NEW_EVENT
  MINT
  SCAN
  CLAIM
  INVALIDATE
}

enum TicketState {
  UNSCANNED
  SCANNED
  CLAIMABLE
  INVALIDATED
}

# COMBAK inherit all from a DataFactory Schema
type Protocol @entity {
  id: ID!
  getUsed: BigInt!
  mintCount: BigInt!
  scanCount: BigInt!
  claimCount: BigInt!
}

type ProtocolDay @entity {
  id: ID!
  timestamp: Int!
  getUsed: BigInt!
  mintCount: BigInt!
  scanCount: BigInt!
  claimCount: BigInt!
}

type Event @entity {
  id: ID!
  relayer: Relayer!
  getUsed: BigInt!
  eventName: String!
  shopUrl: String!
  imageUrl: String!
  mintCount: BigInt!
  timestamp: BigInt!
}

type Relayer @entity {
  id: ID!
  getUsed: BigInt!
  mintCount: BigInt!
  scanCount: BigInt!
  claimCount: BigInt!
  events: [Event]!
  relayerDays: [RelayerDay]!
  usageEvents: [UsageEvent]!
}

type RelayerDay @entity {
  id: ID! # Composite Key: relayerAddress:timestampAsDay
  relayer: Relayer!
  timestamp: Int!
  getUsed: BigInt!
  mintCount: BigInt!
  scanCount: BigInt!
  claimCount: BigInt!
}

type Ticket @entity {
  id: ID!
  relayer: Relayer!
  event: Event!
  state: TicketState!
  url: String
  fuelTankBalance: BigInt!
}

type UsageEvent @entity {
  id: ID!
  relayer: Relayer!
  nftIndex: BigInt!
  getUsed: BigInt!
  interaction: Interaction!
}
